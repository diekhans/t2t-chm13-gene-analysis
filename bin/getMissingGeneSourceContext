#!/usr/bin/env python3

import argparse
import re
import json
from pycbio.sys import fileOps
from pycbio.sys.objDict import ObjDict
from pycbio.hgdata.rangeFinder import RangeFinder
from pycbio.tsv import TsvTable
from geneBoundsBed import GeneBoundsBedReader
from bioTypeCat import BioCategory

def parseArgs():
    usage = """
    Take source gene bounds and list of missing genes and output context,
    which is a contiguous set of missing genes, as well as upstream and downstream
    gene context.
    """
    parser = argparse.ArgumentParser(description=usage)
    parser.add_argument('srcGeneBoundsDb',
                        help="")
    parser.add_argument('missingGenesTsv',
                        help="missing TSV")
    parser.add_argument('missingGeneContextJson',
                        help="")
    opts = parser.parse_args()
    return opts

def buildMissingContexts(conn, missingId):



def buildMissingContexts(conn, missingIds):
    doneIds = set()
    for

def main(opts):
    conn = sqliteOps.connect(opts.srcGeneBoundsDb)
    missingIds = frozenset([r.geneId for r in TsvReader(opts.missingGenesTsv)])

    with fileOps.opengz(opts.missingGeneContextJson, "w") as outFh:
        pass

main(parseArgs())
